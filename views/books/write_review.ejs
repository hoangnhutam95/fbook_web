<section class="relative fix gray-bg">
    <div class="container" id="write_post">
       <div class="row">
          <div class="col-md-8">
             <form action="/books/post-review/<%= book_current %>" method="post">
                <div class="form-group">
                   <label for="exampleInputEmail1">Review title</label>
                   <input type="text" class="form-control" name="review_title" aria-describedby="emailHelp" placeholder="Title" required>
                </div>
                <div class="form-group">
                   <label for="exampleFormControlTextarea1">Example textarea</label>
                   <textarea class="form-control" name="review_content" id="exampleFormControlTextarea1" rows="35" required></textarea>
                </div>
                <div class="form-group">
                   <label for="exampleInputEmail1">Rate this book</label>
                   <input id="rating-book" name="review_start" class="rating" data-min="0" data-max="5" data-step="1" data-size="xs" required>
                </div>
                <button type="submit" class="btn btn-primary">Submit</button>
             </form>
          </div>
          <div class="col-md-4">
             <div class="col-md-12" id="review_img">
                <div class="book-list-photo">
                   <% if (data.item.media.length) { %>
                   <div class="book-list">
                      <% data.item.media.forEach(function (image) { %>
                      <div class="book_item">
                         <img src="<%= image.web.medium_path %>" alt="library">
                      </div>
                      <% }) %>
                      <% if (data.item.media.length == 1) { %>
                      <div class="book_item">
                         <img src="<%= data.item.media[0].web.medium_path %>" alt="library">
                      </div>
                      <% } %>
                   </div>
                   <% } else { %>
                   <div class="book-list">
                      <div class="book_item">
                         <img src="/images/book_default.jpg" alt="library">
                      </div>
                   </div>
                   <% } %>
                </div>
                <div class="bookslide_nav">
                   <i class="icofont icofont-long-arrow-left testi_prev"></i>
                   <i class="icofont icofont-long-arrow-right testi_next"></i>
                </div>
             </div>
             <div class="col-md-12">
                <h4 class="tip-left">Title</h4>
                <p class="lead"><%= data.item.title %></p>
                <div class="space-20"></div>
                <h4 class="tip-left">Count view: <%= data.item.count_view %></h4>
                <div class="space-20"></div>
                <div>
                   <h4 class="tip-left">Author</h4>
                   <div class="media">
                      <div class="media-left">
                         <img src="<%= data.item.author ? '/images/user_default.png' : '/images/logo_framgia.png' %>"
                            class="media-object author-photo img-thumbnail"
                            alt="library">
                      </div>
                      <div class="media-body">
                         <h5><%= data.item.author ? data.item.author : Framgia %></h5>
                      </div>
                   </div>
                </div>
                <div class="space-20"></div>
                <h4 class="tip-left">Description</h4>
                <div class="more fix-text"><%- data.item.description %></div>
             </div>
          </div>
       </div>
    </div>
 </section>
 <%- contentFor('appjs') %>
 <script src="/javascripts/books/book.js" type="text/javascript"></script>
 <script type="text/javascript">
    $('#form-review').validate({highlight: function(element) {
        $(element).closest('.form-group').addClass('has-error');
    },
    unhighlight: function(element) {
        $(element).closest('.form-group').removeClass('has-error');
    },
    errorElement: 'p',
        errorClass: 'error',
        errorPlacement: function(error, element) {
        error.insertAfter(element);
    }});

    Book.init();

    $('button[name=return]').on('click', function (e) {
        e.preventDefault();
        var bookId = $(this).attr('data-book-id');
        var ownerId = $(this).attr('data-owner-id');
        var status = $(this).attr('data-status');
        var data = {
            book_id: bookId,
            owner_id: ownerId,
            status: status
        };
        Book.return(data);
    });

    $('button[name=cancel]').on('click', function (e) {
        e.preventDefault();
        var bookId = $(this).attr('data-book-id');
        var ownerId = $(this).attr('data-owner-id');
        var status = $(this).attr('data-status');
        var data = {
            book_id: bookId,
            owner_id: ownerId,
            status: status
        };
        Book.cancel(data);
    });

    function showTab(element) {
        $('.nav-tabs a[href="' + element + '"]').click();
    }

 </script>
 <script src="/bower/bootstrap-star-rating/js/star-rating.js"></script>
 <script src="/bower/sweetalert/dist/sweetalert.min.js"></script>
 <script src="/bower/ckeditor/ckeditor.js"></script>
 <script>
    CKEDITOR.replace('review_content', {
        height: 600
    });
 </script>
 <%- contentFor('appCss') %>
 <link href="/bower/bootstrap-star-rating/css/star-rating.css" rel="stylesheet" type="text/css">
 <link href="/bower/bootstrap-star-rating/css/theme-krajee-fa.css" rel="stylesheet" type="text/css">
 <link href="/bower/sweetalert/dist/sweetalert.css" rel="stylesheet" type="text/css">
